{"ast":null,"code":"var logger = require(\"js-logger\").get(\"granite:javascript:src:apis:axios\");\n\nimport axios from \"axios\";\naxios.defaults.baseURL = \"/\";\nexport var setAuthHeaders = function setAuthHeaders() {\n  var setLoading = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {\n    return null;\n  };\n  axios.defaults.headers = {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\",\n    \"X-CSRF-TOKEN\": document.querySelector('[name=\"csrf-token\"]').getAttribute(\"content\")\n  };\n  var token = localStorage.getItem(\"authToken\");\n  var email = localStorage.getItem(\"authEmail\");\n\n  if (token && email) {\n    axios.defaults.headers[\"X-Auth-Email\"] = email;\n    axios.defaults.headers[\"X-Auth-Token\"] = token;\n  }\n\n  setLoading(false);\n};","map":{"version":3,"sources":["/Users/saigopikar/granite/app/javascript/src/apis/axios.js"],"names":["axios","defaults","baseURL","setAuthHeaders","setLoading","headers","Accept","document","querySelector","getAttribute","token","localStorage","getItem","email"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEAA,KAAK,CAACC,QAAN,CAAeC,OAAf,GAAyB,GAAzB;AAEA,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAA6B;AAAA,MAA5BC,UAA4B,uEAAf;AAAA,WAAM,IAAN;AAAA,GAAe;AACzDJ,EAAAA,KAAK,CAACC,QAAN,CAAeI,OAAf,GAAyB;AACvBC,IAAAA,MAAM,EAAE,kBADe;AAEvB,oBAAgB,kBAFO;AAGvB,oBAAgBC,QAAQ,CACrBC,aADa,CACC,qBADD,EAEbC,YAFa,CAEA,SAFA;AAHO,GAAzB;AAOA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAd;AACA,MAAMC,KAAK,GAAGF,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAd;;AACA,MAAIF,KAAK,IAAIG,KAAb,EAAoB;AAClBb,IAAAA,KAAK,CAACC,QAAN,CAAeI,OAAf,CAAuB,cAAvB,IAAyCQ,KAAzC;AACAb,IAAAA,KAAK,CAACC,QAAN,CAAeI,OAAf,CAAuB,cAAvB,IAAyCK,KAAzC;AACD;;AACDN,EAAAA,UAAU,CAAC,KAAD,CAAV;AACD,CAfM","sourcesContent":["import axios from \"axios\";\n\naxios.defaults.baseURL = \"/\";\n\nexport const setAuthHeaders = (setLoading = () => null) => {\n  axios.defaults.headers = {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\",\n    \"X-CSRF-TOKEN\": document\n      .querySelector('[name=\"csrf-token\"]')\n      .getAttribute(\"content\")\n  };\n  const token = localStorage.getItem(\"authToken\");\n  const email = localStorage.getItem(\"authEmail\");\n  if (token && email) {\n    axios.defaults.headers[\"X-Auth-Email\"] = email;\n    axios.defaults.headers[\"X-Auth-Token\"] = token;\n  }\n  setLoading(false);\n};\n"]},"metadata":{},"sourceType":"module"}